# 操作系统
## 成绩考核标准
- 考试
- 平时成绩（考勤）
- 实验成绩
- 平时讨论

## 第一章 操作系统引论
> 主要学习操作系统的四大管理功能
> - CPU
> - 内存
> - I/O设备
> - 外设

操作系统（OS）的定义
- **OS是直接控制和管理计算机硬件、软件资源，合理地对各类*作业*（`例如：打开qq这一动作`）进行调度，以方便用户使用的程序集合**。

OS在计算机中的地位（自底向上）
- 裸机
- 操作系统
- 应用软件

### 1.1 操作系统的目标和作用
1. 操作系统的目标
- 方便性
- 有效性：提高系统资源的利用率；提高系统的吞吐量。
- 可扩充性
- 开放性：处理软硬件的兼容问题。

2. 操作系统的作用
- 作为用户和计算机间的接口：`OS处于用户与计算机硬件系统之间`
- 作为计算机系统资源的管理者：`处理机管理、存储器管理、设备管理、文件管理`
- 实现了对计算机资源的抽象

> 用户使用计算机的三种方式：
> - 命令方式
> - 系统调用方式
> - 图标——窗口方式


**作为系统资源的管理者*：
- 执行一个程序前需要将该程序**放到内存中**，才能被CPU处理
- 用 QQ 和朋友视频聊天的过程:
  - Step 1:在各个文件夹中找到 QQ 安装的位置( D :/ Tencent / QQ / Bin )
  - Step 2:双击打开 QQ . exe 
    - `需要把该程序相关数据放入内存`
  - Step 3:QQ程序正常运行 
    - `对应的进程被处理机( CPU )处理 ,找到 QQ.exe 逐层打开文件夹`
  - Step 4:开始和朋友视频聊天 
    - `文件的存放位个程序(可执行需要将摄像头设备分配给进程`

3. 推动操作系统发展的主要动力：
- 不断提高计算机资源利用率
- 方便用户
- 器件的不断更新换代
- 计算机体系结构的不断发展
- 不断提出新的应用需求

### 1.2 操作系统的发展过程
无OS
   1. 人工操作方式
   - 工作方式：
   - 用户：用户是专业人员
   - 输入输出：纸带或卡片
   - 缺点：等待卡带;人工慢
   1. 脱机I/O方式（卡带->磁带）
   - 减少了CPU的空闲时间
   - 提高了I/O速度工作方式

有OS

1. 批处理系统
- 用户使用系统提供的作业控制语言来描述自己对作业运行的控制意图，并将这些控制信息连同作业一起提交给计算机。
- 由OS去控制、调度各作业的运行并输出结果
- 由于作业进入系统后用户不在干预，从而提高了效率。
- 优点：**提高系统资源的使用效率；提高作业吞吐量**。

2. 单道批处理系统
- 一次运行一个作业；一个一个连着完成
- 缺点：CPU没有被充分利用

3. 多道批处理系统

多道程序设计的基本概念 [p7 图1-6 重要!!] 
  - 在多道批处理系统中,用户所提交的作业都先存放在外存上并排成一个队列,称为“**后备队列**”;
  - 然后,由作业调度程序**按一定的算法**从后备队列中选择若干个作业调入**内存**,使它们共享 CPU 和系统中的各种资源
  
主要优点：
- 多道程序**并发**执行，**共享**计算机资源。**资源利用率**大幅提升，CPU和其他资源更能保持“忙碌”状态，**系统吞吐量增大**。

主要缺点：
- **平均周转时间长**`（需要排队一次处理）`
- **没有人机交互功能**

**多道批处理系统需要解决的问题（了解）：*
- 处理机争用问题：满足运行，同时提高利用率
- 内存分配和保护问题
- I/O设备分配问题
- 文件的组织和管理问题：如何读写文件，关于权限。
- 作业管理问题
- 用户和系统的接口问题

#### 1.2.4 分时系统
- 一台计算机连接多个终端,用户通过各自的终端把作业送入计算机;计算机又通过终端向各个用户报告其作业的运行情况。
- 计算机以**时间片**为单位**轮流为各个用户/作业服务**
- 终端用户服务,并能及时地对用户服务请求予以响应
- 目标：
  - 对用户的请求及时响应；
  - 尽量提高系统资源的利用率

分时系统的引入
- 人机交互（边运行边调试）
- 共享主机（设备昂贵）

分时系统实现中的关键问题
- 及时接收
- 及时处理

分时系统的特征
- 多路性：即同时性，宏观上同时，微观上轮流
- 独立性：每个用户感觉独占主机
- 及时性：较短时间响应（1-3秒）
- 交互性：用户请求多方面服务

#### 1.2.5 实时系统
- **及时**响应，在**规定时间内**处理

实时系统的类型
- 工业（武器）控制系统
- 信息查询系统

实时任务的类型
- 按周期性划分
  - 周期性实时任务
  - 非周期性实时任务
    - **开始截止时间**：在某时间以前必须开始执行
    - **完成截止时间**：在某时间以前必须完成
- 按照截止时间划分
  - 硬实时任务
  - 软实时任务

实时系统的特征
- 快速的响应时间
- 有限的交互能力
- 高可靠性

||多路性|独立性|及时性|交互性|可靠性|
|--|----|-----|------|-----|-----|
|批处理系统|无|无|差|差|一般|
|分时系统|多终端服务|有|好|好|可靠|
|实时系统|多路采集、多路控制|有|最好|一般|高度可靠|

#### 1.2.6 微机操作系统的发展
单用户单任务操作系统
- CP/M, DOS
单用户多任务操作系统
- Windows
多用户多任务操作系统
- Linux

### 1.3 操作系统的基本特征
#### 1.3.1 并发 Concurrence
并行与并发
- **并发**：指两个或多个时间在**同一时间间隔**内发生
  - 宏观同时，微观交替
- 并行：指两个或多个事件在**同一时刻**发生
- **注意（重要考点）**
  - 单核CPU同一时刻只能执行一个程序，各个程序只能并发地执行
  - 多核CPU同一时刻可以同时执行多个程序，多个程序可以并行执行。
- **并发性是操作系统一个最基本特性**

> 电脑中，同时运行多个程序是并发。

引入进程
- 进程：在系统中能独立运行并作为资源分配的基本单位，它是由一组机器指令、数据、堆栈等组成的，是一个能独立运行的活动实体。

#### 1.3.2 共享 Sharing
互斥共享方式
- **临界资源：一段时间内，只允许一个进程访问**

同时访问方式
- 允许在一段时间内由多个进程“同时”对资源进行访问。

> 互斥共享方式：同时使用QQ和微信视频，同一时间段内摄像头只能分配给其中一个进程。
> 
> 同时访问方式：同时使用QQ和微信发送文件，宏观上同时发送，微观上交替访问内存

**并发和共享的关系：相辅相成**
- 失去并发性，只有单进程进行，共享性无意义。
- 失去共享性，不允许多个进程访问同一个资源，也无法并发。

#### 1.3.3 虚拟 Virtual
> 一个程序需要放入内存，（创建进程）并给它分配CPU才能执行
- 时分复用技术
- 控分复用技术

#### *1.3.4 异步 Asynchronism
进程的执行不是一贯到底的，系统中并发执行的多道程序“走走停停”，已不可预置的速度向前推进。

### 1.4 操作系统的主要功能
#### 1.4.1 处理机管理功能
- 进程控制
- 进程同步
  - 进程互斥方式：`A访问，B就不能访问`
  - 进程同步方式：`进程间 同步完成`
- 进程通信
- 调度
  - 作业调度
  - 进程调度

#### 1.4.2 存储器管理功能
- 内存分配
  - 静态分配方式
  - 动态分配方式
- 内存保护
- 地址映射
- 内容扩充

#### 1.4.3 设备管理功能
- 缓冲管理
- 设备分配
- 设备处理

#### 1.4.4 文件管理功能
- 文件存储空间的管理
- 目录管理
- 文件的读/写管理和保护

#### *1.4.5 操作系统与用户之间的接口
- 用户接口
- 程序接口

#### *1.4.6 现代操作系统的新功能
- 系统安全
  - 认证技术
  - 密码技术
  - 访问控制技术
  - 反病毒技术
- 网络功能和服务
  - 网络通信
  - 资源管理
  - 应用互操作
- 支持多媒体
  - 接纳控制功能
  - 实时调度
  - 多媒体文件的存储
