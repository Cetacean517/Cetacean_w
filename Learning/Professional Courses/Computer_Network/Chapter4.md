# 第四章 网络层
## 4.1 网络层提供的服务
### 概念
- 虚电路：逻辑连接
- 数据链路
- 逻辑信道：时分复用

### 两种服务（优缺点 p117）
- 虚电路服务
  - 网络负责差错控制和流量控制
- 数据报服务
  - 可靠性交给运输层，即主机
  - 造价低

### 可靠服务和连接的关系
#### 可靠
- 含义：数据无丢失、损坏或重复
- 用 **应答** 来实现，即接收端的反馈

#### 面向连接
- 只是保证传送顺序

**两者没有直接关系**

## 4.2 网际协议IP
### IP协议及配到协议
- ARP 地址解析协议
- RARP 逆地址解析协议
- ICMP 网际控制报文协议
- IGMP 网际组管理协议

#### IP地址表示方法
编址方法
- 分类的IP地址
- 子网的划分
- 构成超网

##### 分类IP地址
##### IP层转发分组流程
- 按照主机所在的网络地址来制作路由表
- 路由表 = 目的主机地址 + 下一条地址

## 4.3 划分子网和构造超网
### 划分子网
- **一个点位内部的事情**。该单位对外仍为没有划分子网的网络。
- 仅将主机号取一部分作为子网号。

#### 子网掩码
#### 路由聚合（构成超网）
CIDR地址块划分
- ISP分配的前缀不可修改。总个数
- 分配总是从可修改的第一位开始，一般先分0再分1.

## 4.4 网际控制报文协议ICMP

## 4.5 因特网的路由选择协议
### 4.5.1 基本概念
- 最佳路由

### RIP报文
- 格式：首部(4) + 路由部分(20)
- 最大长度 = 4 + 20 * 25 = 504 bytes
- 好消息传播快，坏消息传播慢

#### 网络故障的RIP传输

### 内部网关协议 OSPF(Open Shortest Path First)
- 要点
  - 使用洪泛法发送路由信息。（向本自治系统中所有路由器发送）
  - 发送相邻的路由信息
  - 仅路由发生变化，才发送所有路由信息

#### OSPF的区域
- 主干路由器：主干区域
- 区域便捷路由器：主干 <-> 其他区域
- 自治系统边界路由器：本系统 <-> 其他系统
- 类型分组：12345

### 外部网关协议 BGP
- BGP发言人
## 4.6 IP多播
## 4.7 其他网络举例
